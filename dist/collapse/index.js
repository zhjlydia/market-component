import { SpuiComponent } from '../common/component';
SpuiComponent({
  relation: {
    name: 'collapse-item',
    type: 'descendant',

    linked(child) {
      this.set({
        items: [...this.data.items, child]
      }, () => {
        child.updateExpanded();
      });
    }

  },
  props: {
    accordion: Boolean,
    value: null
  },
  data: {
    items: []
  },
  watch: {
    value() {
      this.data.items.forEach(child => {
        child.updateExpanded();
      });
    },

    accordion() {
      this.data.items.forEach(child => {
        child.updateExpanded();
      });
    }

  },
  methods: {
    switch(name, expanded) {
      const {
        accordion,
        value
      } = this.data;

      if (!accordion) {
        name = expanded ? value.concat(name) : value.filter(activeName => activeName !== name);
      } else {
        name = expanded ? name : '';
      }

      this.$emit('change', name);
      this.$emit('input', name);
    }

  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxhcHNlL2luZGV4LnRzIl0sIm5hbWVzIjpbIlNwdWlDb21wb25lbnQiLCJyZWxhdGlvbiIsIm5hbWUiLCJ0eXBlIiwibGlua2VkIiwiY2hpbGQiLCJzZXQiLCJpdGVtcyIsImRhdGEiLCJ1cGRhdGVFeHBhbmRlZCIsInByb3BzIiwiYWNjb3JkaW9uIiwiQm9vbGVhbiIsInZhbHVlIiwid2F0Y2giLCJmb3JFYWNoIiwibWV0aG9kcyIsInN3aXRjaCIsImV4cGFuZGVkIiwiY29uY2F0IiwiZmlsdGVyIiwiYWN0aXZlTmFtZSIsIiRlbWl0Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxhQUFULFFBQThCLHFCQUE5QjtBQUVBQSxhQUFhLENBQUM7QUFDWkMsRUFBQUEsUUFBUSxFQUFFO0FBQ1JDLElBQUFBLElBQUksRUFBRSxlQURFO0FBRVJDLElBQUFBLElBQUksRUFBRSxZQUZFOztBQUdSQyxJQUFBQSxNQUFNLENBQUNDLEtBQUQsRUFBdUI7QUFDM0IsV0FBS0MsR0FBTCxDQUFTO0FBQ1BDLFFBQUFBLEtBQUssRUFBRSxDQUFDLEdBQUcsS0FBS0MsSUFBTCxDQUFVRCxLQUFkLEVBQXFCRixLQUFyQjtBQURBLE9BQVQsRUFFRyxNQUFLO0FBQ05BLFFBQUFBLEtBQUssQ0FBQ0ksY0FBTjtBQUNELE9BSkQ7QUFLRDs7QUFUTyxHQURFO0FBYVpDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxTQUFTLEVBQUVDLE9BRE47QUFFTEMsSUFBQUEsS0FBSyxFQUFFO0FBRkYsR0FiSztBQWtCWkwsRUFBQUEsSUFBSSxFQUFFO0FBQ0pELElBQUFBLEtBQUssRUFBRTtBQURILEdBbEJNO0FBc0JaTyxFQUFBQSxLQUFLLEVBQUU7QUFDTEQsSUFBQUEsS0FBSyxHQUFBO0FBQ0gsV0FBS0wsSUFBTCxDQUFVRCxLQUFWLENBQWdCUSxPQUFoQixDQUF3QlYsS0FBSyxJQUFHO0FBQzlCQSxRQUFBQSxLQUFLLENBQUNJLGNBQU47QUFDRCxPQUZEO0FBR0QsS0FMSTs7QUFNTEUsSUFBQUEsU0FBUyxHQUFBO0FBQ1AsV0FBS0gsSUFBTCxDQUFVRCxLQUFWLENBQWdCUSxPQUFoQixDQUF3QlYsS0FBSyxJQUFHO0FBQzlCQSxRQUFBQSxLQUFLLENBQUNJLGNBQU47QUFDRCxPQUZEO0FBR0Q7O0FBVkksR0F0Qks7QUFtQ1pPLEVBQUFBLE9BQU8sRUFBRTtBQUNQQyxJQUFBQSxNQUFNLENBQUNmLElBQUQsRUFBT2dCLFFBQVAsRUFBZTtBQUNuQixZQUFNO0FBQUVQLFFBQUFBLFNBQUY7QUFBYUUsUUFBQUE7QUFBYixVQUF1QixLQUFLTCxJQUFsQzs7QUFDQSxVQUFJLENBQUNHLFNBQUwsRUFBZ0I7QUFDZFQsUUFBQUEsSUFBSSxHQUFHZ0IsUUFBUSxHQUNYTCxLQUFLLENBQUNNLE1BQU4sQ0FBYWpCLElBQWIsQ0FEVyxHQUVYVyxLQUFLLENBQUNPLE1BQU4sQ0FBYUMsVUFBVSxJQUFJQSxVQUFVLEtBQUtuQixJQUExQyxDQUZKO0FBR0QsT0FKRCxNQUlPO0FBQ0xBLFFBQUFBLElBQUksR0FBR2dCLFFBQVEsR0FBR2hCLElBQUgsR0FBVSxFQUF6QjtBQUNEOztBQUNELFdBQUtvQixLQUFMLENBQVcsUUFBWCxFQUFxQnBCLElBQXJCO0FBQ0EsV0FBS29CLEtBQUwsQ0FBVyxPQUFYLEVBQW9CcEIsSUFBcEI7QUFDRDs7QUFaTTtBQW5DRyxDQUFELENBQWIiLCJmaWxlIjoiY29sbGFwc2UvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTcHVpQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tbW9uL2NvbXBvbmVudCc7XHJcblxyXG5TcHVpQ29tcG9uZW50KHtcclxuICByZWxhdGlvbjoge1xyXG4gICAgbmFtZTogJ2NvbGxhcHNlLWl0ZW0nLFxyXG4gICAgdHlwZTogJ2Rlc2NlbmRhbnQnLFxyXG4gICAgbGlua2VkKGNoaWxkOiBXZWFwcC5Db21wb25lbnQpIHtcclxuICAgICAgdGhpcy5zZXQoe1xyXG4gICAgICAgIGl0ZW1zOiBbLi4udGhpcy5kYXRhLml0ZW1zLCBjaGlsZF1cclxuICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgIGNoaWxkLnVwZGF0ZUV4cGFuZGVkKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHByb3BzOiB7XHJcbiAgICBhY2NvcmRpb246IEJvb2xlYW4sXHJcbiAgICB2YWx1ZTogbnVsbFxyXG4gIH0sXHJcblxyXG4gIGRhdGE6IHtcclxuICAgIGl0ZW1zOiBbXVxyXG4gIH0sXHJcblxyXG4gIHdhdGNoOiB7XHJcbiAgICB2YWx1ZSgpIHtcclxuICAgICAgdGhpcy5kYXRhLml0ZW1zLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgIGNoaWxkLnVwZGF0ZUV4cGFuZGVkKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGFjY29yZGlvbigpIHtcclxuICAgICAgdGhpcy5kYXRhLml0ZW1zLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgIGNoaWxkLnVwZGF0ZUV4cGFuZGVkKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHN3aXRjaChuYW1lLCBleHBhbmRlZCkge1xyXG4gICAgICBjb25zdCB7IGFjY29yZGlvbiwgdmFsdWUgfSA9IHRoaXMuZGF0YTtcclxuICAgICAgaWYgKCFhY2NvcmRpb24pIHtcclxuICAgICAgICBuYW1lID0gZXhwYW5kZWRcclxuICAgICAgICAgID8gdmFsdWUuY29uY2F0KG5hbWUpXHJcbiAgICAgICAgICA6IHZhbHVlLmZpbHRlcihhY3RpdmVOYW1lID0+IGFjdGl2ZU5hbWUgIT09IG5hbWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5hbWUgPSBleHBhbmRlZCA/IG5hbWUgOiAnJztcclxuICAgICAgfVxyXG4gICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBuYW1lKTtcclxuICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBuYW1lKTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG4iXX0=
