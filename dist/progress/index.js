import { SpuiComponent } from '../common/component';
import { BLUE } from '../common/color';
SpuiComponent({
  props: {
    inactive: Boolean,
    percentage: Number,
    pivotText: String,
    pivotColor: String,
    showPivot: {
      type: Boolean,
      value: true
    },
    color: {
      type: String,
      value: BLUE
    },
    textColor: {
      type: String,
      value: '#fff'
    }
  },
  data: {
    pivotWidth: 0,
    progressWidth: 0
  },
  watch: {
    pivotText: 'getWidth',
    showPivot: 'getWidth'
  },
  computed: {
    portionStyle() {
      const width = (this.data.progressWidth - this.data.pivotWidth) * this.data.percentage / 100 + 'px';
      const background = this.getCurrentColor();
      return `width: ${width}; background: ${background}; `;
    },

    pivotStyle() {
      const color = this.data.textColor;
      const background = this.data.pivotColor || this.getCurrentColor();
      return `color: ${color}; background: ${background}`;
    },

    text() {
      return this.data.pivotText || this.data.percentage + '%';
    }

  },

  mounted() {
    this.getWidth();
  },

  methods: {
    getCurrentColor() {
      return this.data.inactive ? '#cacaca' : this.data.color;
    },

    getWidth() {
      this.getRect('.spui-progress').then(rect => {
        this.set({
          progressWidth: rect.width
        });
      });
      this.getRect('.spui-progress__pivot').then(rect => {
        this.set({
          pivotWidth: rect.width || 0
        });
      });
    }

  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2dyZXNzL2luZGV4LnRzIl0sIm5hbWVzIjpbIlNwdWlDb21wb25lbnQiLCJCTFVFIiwicHJvcHMiLCJpbmFjdGl2ZSIsIkJvb2xlYW4iLCJwZXJjZW50YWdlIiwiTnVtYmVyIiwicGl2b3RUZXh0IiwiU3RyaW5nIiwicGl2b3RDb2xvciIsInNob3dQaXZvdCIsInR5cGUiLCJ2YWx1ZSIsImNvbG9yIiwidGV4dENvbG9yIiwiZGF0YSIsInBpdm90V2lkdGgiLCJwcm9ncmVzc1dpZHRoIiwid2F0Y2giLCJjb21wdXRlZCIsInBvcnRpb25TdHlsZSIsIndpZHRoIiwiYmFja2dyb3VuZCIsImdldEN1cnJlbnRDb2xvciIsInBpdm90U3R5bGUiLCJ0ZXh0IiwibW91bnRlZCIsImdldFdpZHRoIiwibWV0aG9kcyIsImdldFJlY3QiLCJ0aGVuIiwicmVjdCIsInNldCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsYUFBVCxRQUE4QixxQkFBOUI7QUFDQSxTQUFTQyxJQUFULFFBQXFCLGlCQUFyQjtBQUVBRCxhQUFhLENBQUM7QUFDWkUsRUFBQUEsS0FBSyxFQUFFO0FBQ0xDLElBQUFBLFFBQVEsRUFBRUMsT0FETDtBQUVMQyxJQUFBQSxVQUFVLEVBQUVDLE1BRlA7QUFHTEMsSUFBQUEsU0FBUyxFQUFFQyxNQUhOO0FBSUxDLElBQUFBLFVBQVUsRUFBRUQsTUFKUDtBQUtMRSxJQUFBQSxTQUFTLEVBQUU7QUFDVEMsTUFBQUEsSUFBSSxFQUFFUCxPQURHO0FBRVRRLE1BQUFBLEtBQUssRUFBRTtBQUZFLEtBTE47QUFTTEMsSUFBQUEsS0FBSyxFQUFFO0FBQ0xGLE1BQUFBLElBQUksRUFBRUgsTUFERDtBQUVMSSxNQUFBQSxLQUFLLEVBQUVYO0FBRkYsS0FURjtBQWFMYSxJQUFBQSxTQUFTLEVBQUU7QUFDVEgsTUFBQUEsSUFBSSxFQUFFSCxNQURHO0FBRVRJLE1BQUFBLEtBQUssRUFBRTtBQUZFO0FBYk4sR0FESztBQW9CWkcsRUFBQUEsSUFBSSxFQUFFO0FBQ0pDLElBQUFBLFVBQVUsRUFBRSxDQURSO0FBRUpDLElBQUFBLGFBQWEsRUFBRTtBQUZYLEdBcEJNO0FBeUJaQyxFQUFBQSxLQUFLLEVBQUU7QUFDTFgsSUFBQUEsU0FBUyxFQUFFLFVBRE47QUFFTEcsSUFBQUEsU0FBUyxFQUFFO0FBRk4sR0F6Qks7QUE4QlpTLEVBQUFBLFFBQVEsRUFBRTtBQUNSQyxJQUFBQSxZQUFZLEdBQUE7QUFDVixZQUFNQyxLQUFLLEdBQUcsQ0FBQyxLQUFLTixJQUFMLENBQVVFLGFBQVYsR0FBMEIsS0FBS0YsSUFBTCxDQUFVQyxVQUFyQyxJQUFtRCxLQUFLRCxJQUFMLENBQVVWLFVBQTdELEdBQTBFLEdBQTFFLEdBQWdGLElBQTlGO0FBQ0EsWUFBTWlCLFVBQVUsR0FBRyxLQUFLQyxlQUFMLEVBQW5CO0FBQ0EsYUFBTyxVQUFVRixLQUFLLGlCQUFpQkMsVUFBVSxJQUFqRDtBQUNELEtBTE87O0FBT1JFLElBQUFBLFVBQVUsR0FBQTtBQUNSLFlBQU1YLEtBQUssR0FBRyxLQUFLRSxJQUFMLENBQVVELFNBQXhCO0FBQ0EsWUFBTVEsVUFBVSxHQUFHLEtBQUtQLElBQUwsQ0FBVU4sVUFBVixJQUF3QixLQUFLYyxlQUFMLEVBQTNDO0FBQ0EsYUFBTyxVQUFVVixLQUFLLGlCQUFpQlMsVUFBVSxFQUFqRDtBQUNELEtBWE87O0FBYVJHLElBQUFBLElBQUksR0FBQTtBQUNGLGFBQU8sS0FBS1YsSUFBTCxDQUFVUixTQUFWLElBQXVCLEtBQUtRLElBQUwsQ0FBVVYsVUFBVixHQUF1QixHQUFyRDtBQUNEOztBQWZPLEdBOUJFOztBQWdEWnFCLEVBQUFBLE9BQU8sR0FBQTtBQUNMLFNBQUtDLFFBQUw7QUFDRCxHQWxEVzs7QUFvRFpDLEVBQUFBLE9BQU8sRUFBRTtBQUNQTCxJQUFBQSxlQUFlLEdBQUE7QUFDYixhQUFPLEtBQUtSLElBQUwsQ0FBVVosUUFBVixHQUFxQixTQUFyQixHQUFpQyxLQUFLWSxJQUFMLENBQVVGLEtBQWxEO0FBQ0QsS0FITTs7QUFLUGMsSUFBQUEsUUFBUSxHQUFBO0FBQ04sV0FBS0UsT0FBTCxDQUFhLGdCQUFiLEVBQStCQyxJQUEvQixDQUFvQ0MsSUFBSSxJQUFHO0FBQ3pDLGFBQUtDLEdBQUwsQ0FBUztBQUNQZixVQUFBQSxhQUFhLEVBQUVjLElBQUksQ0FBQ1Y7QUFEYixTQUFUO0FBR0QsT0FKRDtBQU1BLFdBQUtRLE9BQUwsQ0FBYSx1QkFBYixFQUFzQ0MsSUFBdEMsQ0FBMkNDLElBQUksSUFBRztBQUNoRCxhQUFLQyxHQUFMLENBQVM7QUFDUGhCLFVBQUFBLFVBQVUsRUFBRWUsSUFBSSxDQUFDVixLQUFMLElBQWM7QUFEbkIsU0FBVDtBQUdELE9BSkQ7QUFLRDs7QUFqQk07QUFwREcsQ0FBRCxDQUFiIiwiZmlsZSI6InByb2dyZXNzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3B1aUNvbXBvbmVudCB9IGZyb20gJy4uL2NvbW1vbi9jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBCTFVFIH0gZnJvbSAnLi4vY29tbW9uL2NvbG9yJztcclxuXHJcblNwdWlDb21wb25lbnQoe1xyXG4gIHByb3BzOiB7XHJcbiAgICBpbmFjdGl2ZTogQm9vbGVhbixcclxuICAgIHBlcmNlbnRhZ2U6IE51bWJlcixcclxuICAgIHBpdm90VGV4dDogU3RyaW5nLFxyXG4gICAgcGl2b3RDb2xvcjogU3RyaW5nLFxyXG4gICAgc2hvd1Bpdm90OiB7XHJcbiAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgIHZhbHVlOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgY29sb3I6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICB2YWx1ZTogQkxVRVxyXG4gICAgfSxcclxuICAgIHRleHRDb2xvcjoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHZhbHVlOiAnI2ZmZidcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBkYXRhOiB7XHJcbiAgICBwaXZvdFdpZHRoOiAwLFxyXG4gICAgcHJvZ3Jlc3NXaWR0aDogMFxyXG4gIH0sXHJcblxyXG4gIHdhdGNoOiB7XHJcbiAgICBwaXZvdFRleHQ6ICdnZXRXaWR0aCcsXHJcbiAgICBzaG93UGl2b3Q6ICdnZXRXaWR0aCdcclxuICB9LFxyXG5cclxuICBjb21wdXRlZDoge1xyXG4gICAgcG9ydGlvblN0eWxlKCkge1xyXG4gICAgICBjb25zdCB3aWR0aCA9ICh0aGlzLmRhdGEucHJvZ3Jlc3NXaWR0aCAtIHRoaXMuZGF0YS5waXZvdFdpZHRoKSAqIHRoaXMuZGF0YS5wZXJjZW50YWdlIC8gMTAwICsgJ3B4JztcclxuICAgICAgY29uc3QgYmFja2dyb3VuZCA9IHRoaXMuZ2V0Q3VycmVudENvbG9yKCk7XHJcbiAgICAgIHJldHVybiBgd2lkdGg6ICR7d2lkdGh9OyBiYWNrZ3JvdW5kOiAke2JhY2tncm91bmR9OyBgO1xyXG4gICAgfSxcclxuXHJcbiAgICBwaXZvdFN0eWxlKCkge1xyXG4gICAgICBjb25zdCBjb2xvciA9IHRoaXMuZGF0YS50ZXh0Q29sb3I7XHJcbiAgICAgIGNvbnN0IGJhY2tncm91bmQgPSB0aGlzLmRhdGEucGl2b3RDb2xvciB8fCB0aGlzLmdldEN1cnJlbnRDb2xvcigpO1xyXG4gICAgICByZXR1cm4gYGNvbG9yOiAke2NvbG9yfTsgYmFja2dyb3VuZDogJHtiYWNrZ3JvdW5kfWBcclxuICAgIH0sXHJcblxyXG4gICAgdGV4dCgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5waXZvdFRleHQgfHwgdGhpcy5kYXRhLnBlcmNlbnRhZ2UgKyAnJSc7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgbW91bnRlZCgpIHtcclxuICAgIHRoaXMuZ2V0V2lkdGgoKTtcclxuICB9LFxyXG5cclxuICBtZXRob2RzOiB7XHJcbiAgICBnZXRDdXJyZW50Q29sb3IoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5hY3RpdmUgPyAnI2NhY2FjYScgOiB0aGlzLmRhdGEuY29sb3I7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICB0aGlzLmdldFJlY3QoJy5zcHVpLXByb2dyZXNzJykudGhlbihyZWN0ID0+IHtcclxuICAgICAgICB0aGlzLnNldCh7XHJcbiAgICAgICAgICBwcm9ncmVzc1dpZHRoOiByZWN0LndpZHRoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5nZXRSZWN0KCcuc3B1aS1wcm9ncmVzc19fcGl2b3QnKS50aGVuKHJlY3QgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0KHtcclxuICAgICAgICAgIHBpdm90V2lkdGg6IHJlY3Qud2lkdGggfHwgMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG4iXX0=
