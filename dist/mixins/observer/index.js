import { behavior } from './behavior';
import { observeProps } from './props';
export function observe(SpuiOptions, options) {
  const {
    watch,
    computed
  } = SpuiOptions;
  options.behaviors.push(behavior);

  if (watch) {
    const props = options.properties || {};
    Object.keys(watch).forEach(key => {
      if (key in props) {
        let prop = props[key];

        if (prop === null || !('type' in prop)) {
          prop = {
            type: prop
          };
        }

        prop.observer = watch[key];
        props[key] = prop;
      }
    });
    options.properties = props;
  }

  if (computed) {
    options.methods = options.methods || {};

    options.methods.$options = () => SpuiOptions;

    if (options.properties) {
      observeProps(options.properties);
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1peGlucy9vYnNlcnZlci9pbmRleC50cyJdLCJuYW1lcyI6WyJiZWhhdmlvciIsIm9ic2VydmVQcm9wcyIsIm9ic2VydmUiLCJTcHVpT3B0aW9ucyIsIm9wdGlvbnMiLCJ3YXRjaCIsImNvbXB1dGVkIiwiYmVoYXZpb3JzIiwicHVzaCIsInByb3BzIiwicHJvcGVydGllcyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwicHJvcCIsInR5cGUiLCJvYnNlcnZlciIsIm1ldGhvZHMiLCIkb3B0aW9ucyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsUUFBVCxRQUF5QixZQUF6QjtBQUNBLFNBQVNDLFlBQVQsUUFBNkIsU0FBN0I7QUFFQSxPQUFNLFNBQVVDLE9BQVYsQ0FBa0JDLFdBQWxCLEVBQStCQyxPQUEvQixFQUFzQztBQUMxQyxRQUFNO0FBQUVDLElBQUFBLEtBQUY7QUFBU0MsSUFBQUE7QUFBVCxNQUFzQkgsV0FBNUI7QUFFQUMsRUFBQUEsT0FBTyxDQUFDRyxTQUFSLENBQWtCQyxJQUFsQixDQUF1QlIsUUFBdkI7O0FBRUEsTUFBSUssS0FBSixFQUFXO0FBQ1QsVUFBTUksS0FBSyxHQUFHTCxPQUFPLENBQUNNLFVBQVIsSUFBc0IsRUFBcEM7QUFDQUMsSUFBQUEsTUFBTSxDQUFDQyxJQUFQLENBQVlQLEtBQVosRUFBbUJRLE9BQW5CLENBQTJCQyxHQUFHLElBQUc7QUFDL0IsVUFBSUEsR0FBRyxJQUFJTCxLQUFYLEVBQWtCO0FBQ2hCLFlBQUlNLElBQUksR0FBR04sS0FBSyxDQUFDSyxHQUFELENBQWhCOztBQUNBLFlBQUlDLElBQUksS0FBSyxJQUFULElBQWlCLEVBQUUsVUFBVUEsSUFBWixDQUFyQixFQUF3QztBQUN0Q0EsVUFBQUEsSUFBSSxHQUFHO0FBQUVDLFlBQUFBLElBQUksRUFBRUQ7QUFBUixXQUFQO0FBQ0Q7O0FBQ0RBLFFBQUFBLElBQUksQ0FBQ0UsUUFBTCxHQUFnQlosS0FBSyxDQUFDUyxHQUFELENBQXJCO0FBQ0FMLFFBQUFBLEtBQUssQ0FBQ0ssR0FBRCxDQUFMLEdBQWFDLElBQWI7QUFDRDtBQUNGLEtBVEQ7QUFXQVgsSUFBQUEsT0FBTyxDQUFDTSxVQUFSLEdBQXFCRCxLQUFyQjtBQUNEOztBQUVELE1BQUlILFFBQUosRUFBYztBQUNaRixJQUFBQSxPQUFPLENBQUNjLE9BQVIsR0FBa0JkLE9BQU8sQ0FBQ2MsT0FBUixJQUFtQixFQUFyQzs7QUFDQWQsSUFBQUEsT0FBTyxDQUFDYyxPQUFSLENBQWdCQyxRQUFoQixHQUEyQixNQUFNaEIsV0FBakM7O0FBRUEsUUFBSUMsT0FBTyxDQUFDTSxVQUFaLEVBQXdCO0FBQ3RCVCxNQUFBQSxZQUFZLENBQUNHLE9BQU8sQ0FBQ00sVUFBVCxDQUFaO0FBQ0Q7QUFDRjtBQUNGIiwiZmlsZSI6Im1peGlucy9vYnNlcnZlci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJlaGF2aW9yIH0gZnJvbSAnLi9iZWhhdmlvcic7XHJcbmltcG9ydCB7IG9ic2VydmVQcm9wcyB9IGZyb20gJy4vcHJvcHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmUoU3B1aU9wdGlvbnMsIG9wdGlvbnMpIHtcclxuICBjb25zdCB7IHdhdGNoLCBjb21wdXRlZCB9ID0gU3B1aU9wdGlvbnM7XHJcblxyXG4gIG9wdGlvbnMuYmVoYXZpb3JzLnB1c2goYmVoYXZpb3IpO1xyXG5cclxuICBpZiAod2F0Y2gpIHtcclxuICAgIGNvbnN0IHByb3BzID0gb3B0aW9ucy5wcm9wZXJ0aWVzIHx8IHt9O1xyXG4gICAgT2JqZWN0LmtleXMod2F0Y2gpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgaWYgKGtleSBpbiBwcm9wcykge1xyXG4gICAgICAgIGxldCBwcm9wID0gcHJvcHNba2V5XTtcclxuICAgICAgICBpZiAocHJvcCA9PT0gbnVsbCB8fCAhKCd0eXBlJyBpbiBwcm9wKSkge1xyXG4gICAgICAgICAgcHJvcCA9IHsgdHlwZTogcHJvcCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm9wLm9ic2VydmVyID0gd2F0Y2hba2V5XTtcclxuICAgICAgICBwcm9wc1trZXldID0gcHJvcDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgb3B0aW9ucy5wcm9wZXJ0aWVzID0gcHJvcHM7XHJcbiAgfVxyXG5cclxuICBpZiAoY29tcHV0ZWQpIHtcclxuICAgIG9wdGlvbnMubWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcyB8fCB7fTtcclxuICAgIG9wdGlvbnMubWV0aG9kcy4kb3B0aW9ucyA9ICgpID0+IFNwdWlPcHRpb25zO1xyXG5cclxuICAgIGlmIChvcHRpb25zLnByb3BlcnRpZXMpIHtcclxuICAgICAgb2JzZXJ2ZVByb3BzKG9wdGlvbnMucHJvcGVydGllcyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==
