import { isObj } from '../common/utils';
const defaultOptions = {
  selector: '#spui-notify',
  duration: 3000
};

function parseOptions(text) {
  return isObj(text) ? text : {
    text
  };
}

function getContext() {
  const pages = getCurrentPages();
  return pages[pages.length - 1];
}

export default function Notify(options = {}) {
  options = Object.assign({}, defaultOptions, parseOptions(options));
  const context = options.context || getContext();
  const notify = context.selectComponent(options.selector);
  delete options.selector;

  if (notify) {
    notify.set(options);
    notify.show();
  } else {
    console.warn('未找到 spui-notify 节点，请确认 selector 及 context 是否正确');
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmeS9ub3RpZnkudHMiXSwibmFtZXMiOlsiaXNPYmoiLCJkZWZhdWx0T3B0aW9ucyIsInNlbGVjdG9yIiwiZHVyYXRpb24iLCJwYXJzZU9wdGlvbnMiLCJ0ZXh0IiwiZ2V0Q29udGV4dCIsInBhZ2VzIiwiZ2V0Q3VycmVudFBhZ2VzIiwibGVuZ3RoIiwiTm90aWZ5Iiwib3B0aW9ucyIsIk9iamVjdCIsImFzc2lnbiIsImNvbnRleHQiLCJub3RpZnkiLCJzZWxlY3RDb21wb25lbnQiLCJzZXQiLCJzaG93IiwiY29uc29sZSIsIndhcm4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLEtBQVQsUUFBc0IsaUJBQXRCO0FBUUEsTUFBTUMsY0FBYyxHQUFHO0FBQ3JCQyxFQUFBQSxRQUFRLEVBQUUsY0FEVztBQUVyQkMsRUFBQUEsUUFBUSxFQUFFO0FBRlcsQ0FBdkI7O0FBS0EsU0FBU0MsWUFBVCxDQUFzQkMsSUFBdEIsRUFBMEI7QUFDeEIsU0FBT0wsS0FBSyxDQUFDSyxJQUFELENBQUwsR0FBY0EsSUFBZCxHQUFxQjtBQUFFQSxJQUFBQTtBQUFGLEdBQTVCO0FBQ0Q7O0FBRUQsU0FBU0MsVUFBVCxHQUFtQjtBQUNqQixRQUFNQyxLQUFLLEdBQUdDLGVBQWUsRUFBN0I7QUFDQSxTQUFPRCxLQUFLLENBQUNBLEtBQUssQ0FBQ0UsTUFBTixHQUFlLENBQWhCLENBQVo7QUFDRDs7QUFFRCxlQUFjLFNBQVVDLE1BQVYsQ0FBaUJDLE9BQUEsR0FBeUIsRUFBMUMsRUFBNEM7QUFDeERBLEVBQUFBLE9BQU8sR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQlosY0FBbEIsRUFBa0NHLFlBQVksQ0FBQ08sT0FBRCxDQUE5QyxDQUFWO0FBRUEsUUFBTUcsT0FBTyxHQUFHSCxPQUFPLENBQUNHLE9BQVIsSUFBbUJSLFVBQVUsRUFBN0M7QUFDQSxRQUFNUyxNQUFNLEdBQUdELE9BQU8sQ0FBQ0UsZUFBUixDQUF3QkwsT0FBTyxDQUFDVCxRQUFoQyxDQUFmO0FBQ0EsU0FBT1MsT0FBTyxDQUFDVCxRQUFmOztBQUVBLE1BQUlhLE1BQUosRUFBWTtBQUNWQSxJQUFBQSxNQUFNLENBQUNFLEdBQVAsQ0FBV04sT0FBWDtBQUNBSSxJQUFBQSxNQUFNLENBQUNHLElBQVA7QUFDRCxHQUhELE1BR087QUFDTEMsSUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsZ0RBQWI7QUFDRDtBQUNGIiwiZmlsZSI6Im5vdGlmeS9ub3RpZnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc09iaiB9IGZyb20gJy4uL2NvbW1vbi91dGlscyc7XHJcblxyXG50eXBlIE5vdGlmeU9wdGlvbnMgPSB7XHJcbiAgc2VsZWN0b3I/OiBzdHJpbmc7XHJcbiAgZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgY29udGV4dD86IGFueTtcclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gIHNlbGVjdG9yOiAnI3NwdWktbm90aWZ5JyxcclxuICBkdXJhdGlvbjogMzAwMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gcGFyc2VPcHRpb25zKHRleHQpIHtcclxuICByZXR1cm4gaXNPYmoodGV4dCkgPyB0ZXh0IDogeyB0ZXh0IH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XHJcbiAgY29uc3QgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcclxuICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE5vdGlmeShvcHRpb25zOiBOb3RpZnlPcHRpb25zID0ge30pIHtcclxuICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIHBhcnNlT3B0aW9ucyhvcHRpb25zKSk7XHJcblxyXG4gIGNvbnN0IGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQgfHwgZ2V0Q29udGV4dCgpO1xyXG4gIGNvbnN0IG5vdGlmeSA9IGNvbnRleHQuc2VsZWN0Q29tcG9uZW50KG9wdGlvbnMuc2VsZWN0b3IpO1xyXG4gIGRlbGV0ZSBvcHRpb25zLnNlbGVjdG9yO1xyXG5cclxuICBpZiAobm90aWZ5KSB7XHJcbiAgICBub3RpZnkuc2V0KG9wdGlvbnMpO1xyXG4gICAgbm90aWZ5LnNob3coKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS53YXJuKCfmnKrmib7liLAgc3B1aS1ub3RpZnkg6IqC54K577yM6K+356Gu6K6kIHNlbGVjdG9yIOWPiiBjb250ZXh0IOaYr+WQpuato+ehricpO1xyXG4gIH1cclxufVxyXG4iXX0=
